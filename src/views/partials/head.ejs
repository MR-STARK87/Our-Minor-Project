<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title><%= title || 'My App' %></title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Font Awesome -->
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
/>

<!-- Quill Editor (for Notes) -->
<link
    href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
    rel="stylesheet"
/>

<style>
    :root {
        /* Light theme colors */
        --nav-height: 80px;
        --bg-primary: #fafafa;
        --bg-secondary: #ffffff;
        --bg-tertiary: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666666;
        --text-muted: #999999;
        --accent-primary: #6366f1;
        --accent-secondary: #8b5cf6;
        --success: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;
        --shadow: rgba(0, 0, 0, 0.1);
        --shadow-lg: rgba(0, 0, 0, 0.15);
        --shadow-subtle: 0 4px 6px -1px var(--shadow), 0 2px 4px -1px var(--shadow);
        --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --glass-bg: rgba(255, 255, 255, 0.1);
        --border-color: rgba(255, 255, 255, 0.2);
    }

    [data-theme="dark"] {
        --bg-primary: #262624;
        --bg-secondary: #141413;
        --bg-tertiary: #1a1a18;
        --text-primary: #c2c0b6;
        --text-secondary: #c2c0b6;
        --text-muted: #888888;
        --shadow: rgba(0, 0, 0, 0.3);
        --shadow-lg: rgba(0, 0, 0, 0.4);
        --glass-bg: rgba(0, 0, 0, 0.3);
        --border-color: rgba(194, 192, 182, 0.15);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        overflow: hidden;
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    /* Hide scrollbars on html and body completely */
    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
        display: none;
        width: 0;
        height: 0;
    }

    html {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    body {
        font-family: "IBM Plex Sans", sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        transition: all 0.3s ease;
        overflow: hidden;
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: 0;
        padding: 0;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .accent-font {
        font-family: "Space Grotesk", sans-serif;
    }

    /* Horizontal Navigation Container */
    .horizontal-container {
        display: flex;
        width: 400%;
        height: 100%;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform;
        overflow: hidden;
    }

    .page-section {
        width: 25%;
        height: 100%;
        flex-shrink: 0;
        overflow: hidden;
        box-sizing: border-box;
    }

    /* Add padding to chat, notes, and flashcards sections only */
    #chatSection,
    #notesSection,
    #flashcardsSection {
        padding-top: 5rem;
    }

    /* DEN section has no padding to allow full vanta.js background */
    #denSection {
        padding-top: 0;
    }

    .horizontal-container.show-chat {
        transform: translateX(0);
    }

    .horizontal-container.show-notes {
        transform: translateX(-25%);
    }

    .horizontal-container.show-den {
        transform: translateX(-50%);
    }

    .horizontal-container.show-flashcards {
        transform: translateX(-75%);
    }

    /* Navigation Indicator */
    .nav-indicator {
        position: fixed;
        top: 1.5rem;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1000;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        background: var(--bg-secondary);
        padding: 0.75rem 1.5rem;
        border-radius: 2rem;
        box-shadow: 0 4px 20px var(--shadow-lg);
        border: 1px solid var(--border-color);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    /* Glassmorphism effect when ambient mode is active on DEN page - LIGHT MODE ONLY */
    body:not([data-theme="dark"]) .horizontal-container.show-den body.ambient-active .nav-indicator,
    body:not([data-theme="dark"]) body.ambient-active .horizontal-container.show-den .nav-indicator {
        background: rgba(255, 255, 255, 0.1) !important;
        backdrop-filter: blur(16px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    /* Adjust nav dot and page name colors for glassmorphism visibility - LIGHT MODE ONLY */
    body:not([data-theme="dark"]) body.ambient-active .horizontal-container.show-den .nav-dot {
        background: rgba(255, 255, 255, 0.4);
    }

    body:not([data-theme="dark"]) body.ambient-active .horizontal-container.show-den .nav-dot.active {
        background: rgba(255, 255, 255, 0.9);
    }

    body:not([data-theme="dark"]) body.ambient-active .horizontal-container.show-den .nav-page-name {
        color: rgba(255, 255, 255, 0.95);
    }

    .nav-dots-container {
        display: flex;
        gap: 0.5rem;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .nav-page-name {
        font-family: 'Space Grotesk', sans-serif;
        font-size: 0.75rem;
        font-weight: 500;
        color: var(--text-secondary);
        opacity: 0;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        white-space: nowrap;
        transform: translateY(-5px);
        padding: 0;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .nav-page-name.visible {
        opacity: 1;
        max-height: 20px;
        margin-top: 0.25rem;
        padding-top: 0.25rem;
        transform: translateY(0);
    }

    .nav-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--text-muted);
        transition: all 0.3s ease;
        cursor: pointer;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .nav-dot.active {
        background: var(--accent-primary);
        width: 30px;
        border-radius: 5px;
    }

    .nav-dot:hover {
        background: var(--accent-secondary);
    }

    /* Navigation Hint */


    /* Theme Toggle Button */
    .theme-toggle {
        position: fixed;
        top: 1.5rem;
        left: 2rem;
        z-index: 1001;
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-subtle);
    }

    .theme-toggle:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 16px var(--shadow-lg);
    }

    .theme-toggle i {
        font-size: 1.25rem;
        color: var(--text-primary);
        transition: all 0.3s ease;
    }
</style>
